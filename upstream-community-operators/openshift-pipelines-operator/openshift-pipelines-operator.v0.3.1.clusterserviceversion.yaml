apiVersion: operators.coreos.com/v1alpha1
kind: ClusterServiceVersion
metadata:
  annotations:
    capabilities: Basic Install
    categories: "Developer Tools"
    description: OpenShift Pipelines is a cloud-native CI/CD solution for building pipelines using Tekton concepts which run natively on OpenShift and Kubernetes.
    containerImage: quay.io/openshift-pipeline/openshift-pipelines-operator:v0.3.1-1
    createdAt: 2019-03-15T19:44:21Z
    certified: "false"
    support: Red Hat, Inc.
    repository: https://github.com/openshift/tektoncd-pipeline-operator
    alm-examples: |
      [
        {
          "apiVersion": "tekton.dev/v1alpha1",
          "kind": "Install",
          "metadata": {
            "name": "pipelines-install"
          },
          "spec": {}
        }
      ]
  name: openshift-pipelines-operator.v0.3.1
  namespace: placeholder
spec:
  version: 0.3.1
  maturity: alpha
  provider:
    name: Red Hat, Inc.
  maintainers:
  - name: Red Hat, Inc.
    email: customerservice@redhat.com
  links:
  - name: Openshift Tektoncd Pipeline GitHub Repository
    url: https://github.com/openshift/tektoncd-pipeline
  - name: OpenShift Pipelines Operator GitHub Repository
    url: https://github.com/openshift/tektoncd-pipeline-operator
  keywords: ['tektoncd', 'openshift', 'build', 'pipeline']
  apiservicedefinitions: {}
  customresourcedefinitions:
    owned:
    - name: installs.tekton.dev
      version: v1alpha1
      kind: Install
      displayName: OpenShift Pipelines Install
      description: OpenShift Pipelines is a cloud-native CI/CD solution for building pipelines using Tekton concepts which run natively on OpenShift and Kubernetes.
      resources:
      - kind: clusterroles
        version: v1
      - kind: customresourcedefinitions
        version: v1beta1
      - kind: deployments
        version: v1beta1
      - kind: podsecuritypolicies
        version: v1beta1
      - kind: clusterrolebindings
        version: v1beta1
      - kind: services
        version: v1
      - kind: pods
        version: v1
      - kind: configmaps
        version: v1
      - kind: installs
        version: v1alpha1
      - kind: namespaces
        version: v1
      - kind: serviceaccounts
        version: v1
      specDescriptors: []
      statusDescriptors:
      - description: List of resources installed by the operator for this cr
        displayName: Installed Resources
        path: resources
      - description: Version of Tekton Pipeline installed
        displayName: Tekton Pipeline Version
        path: version
  description: |
    OpenShift Pipelines is a cloud-native CI/CD solution for building pipelines 
    using [Tekton](https://tekton.dev) concepts which run natively on OpenShift and Kubernetes.

    OpenShift Pipelines enables:
    * Defining CI/CD pipelines using Tekton CRDs
    * Running pipelines on-demand in separate pods
    * Serverless execution of pipelines
    * Portability across any Kubernetes platform

    Note:
    - When 'Openshift-Pipelines' is installed, 'tekton-pipelines' Namespace will be created.
    - This operator supports only 'OwnNamespace' and 'SingleNamespace' installModes
  displayName: OpenShift Pipelines Operator
  install:
    spec:
      clusterPermissions:
      - rules:
        - apiGroups:
          - ""
          resources:
          - pods
          - services
          - endpoints
          - persistentvolumeclaims
          - events
          - configmaps
          - secrets
          verbs:
          - '*'
        - apiGroups:
          - ""
          resources:
          - namespaces
          verbs:
          - get
          - list
          - create
          - update
          - delete
          - patch
          - watch
        - apiGroups:
          - apps
          resources:
          - deployments
          - daemonsets
          - replicasets
          - statefulsets
          - deployments/finalizers
          verbs:
          - '*'
        - apiGroups:
          - monitoring.coreos.com
          resources:
          - servicemonitors
          verbs:
          - get
          - create
        - apiGroups:
          - tekton.dev
          resources:
          - '*'
          - installs
          verbs:
          - '*'
        - apiGroups:
          - rbac.authorization.k8s.io
          resources:
          - clusterroles
          verbs:
          - get
          - create
          - update
          - delete
        - apiGroups:
          - ""
          resources:
          - serviceaccounts
          verbs:
          - get
          - list
          - create
          - update
          - delete
          - patch
          - watch
        - apiGroups:
          - rbac.authorization.k8s.io
          resources:
          - clusterrolebindings
          verbs:
          - get
          - create
          - update
          - delete
        - apiGroups:
          - apiextensions.k8s.io
          resources:
          - customresourcedefinitions
          verbs:
          - get
          - create
          - update
          - delete
        - apiGroups:
          - admissionregistration.k8s.io
          resources:
          - mutatingwebhookconfigurations
          verbs:
          - get
          - list
          - create
          - update
          - delete
          - patch
          - watch
        - apiGroups:
          - build.knative.dev
          resources:
          - builds
          - buildtemplates
          - clusterbuildtemplates
          verbs:
          - get
          - list
          - create
          - update
          - delete
          - patch
          - watch
        - apiGroups:
          - extensions
          resources:
          - deployments
          verbs:
          - get
          - list
          - create
          - update
          - delete
          - patch
          - watch
        - apiGroups:
          - extensions
          resources:
          - deployments/finalizers
          verbs:
          - get
          - list
          - create
          - update
          - delete
          - patch
          - watch
        - apiGroups:
          - policy
          resources:
          - podsecuritypolicies
          verbs:
          - get
          - create
          - update
          - use
        serviceAccountName: openshift-pipelines-operator
      deployments:
      - name: openshift-pipelines-operator
        spec:
          replicas: 1
          selector:
            matchLabels:
              name: openshift-pipelines-operator
          strategy: {}
          template:
            metadata:
              labels:
                name: openshift-pipelines-operator
            spec:
              containers:
              - command:
                - openshift-pipelines-operator
                env:
                - name: WATCH_NAMESPACE
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.annotations['olm.targetNamespaces']
                - name: POD_NAME
                  valueFrom:
                    fieldRef:
                      fieldPath: metadata.name
                - name: OPERATOR_NAME
                  value: openshift-pipelines-operator
                image: quay.io/openshift-pipeline/openshift-pipelines-operator:v0.3.1-1
                imagePullPolicy: Always
                name: openshift-pipelines-operator
                resources: {}
              serviceAccountName: openshift-pipelines-operator
    strategy: deployment
  installModes:
  - supported: true
    type: OwnNamespace
  - supported: true
    type: SingleNamespace
  - supported: false
    type: MultiNamespace
  - supported: false
    type: AllNamespaces
